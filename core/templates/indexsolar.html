{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock title %}

<!-- Specific CSS goes HERE  -->
{% block stylesheets %}
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/>
{% endblock stylesheets %}

{% block content %}

    <div class="row gap-20 masonry pos-r">
    <div class="masonry-item  col-md-12">
        <div class="p-20 mx-auto row" style="background-color: #313131;">
            <div class=" col-sm-5 d-inline-block">
                <div class=" input-group date" id="datetimepicker1" data-target-input="nearest">
                    <input type="text" id="fromdata" class="form-control datetimepicker-input"
                           data-target="#datetimepicker1">
                    <div class="input-group-append" data-target="#datetimepicker1" data-toggle="datetimepicker">
                        <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                    </div>
                </div>
            </div>
            <div class="col-sm-5 d-inline-block">
                <div class="input-group date" id="datetimepicker2" data-target-input="nearest">
                    <input type="text" id="todata" class="form-control datetimepicker-input"
                           data-target="#datetimepicker2">
                    <div class="input-group-append" data-target="#datetimepicker2" data-toggle="datetimepicker">
                        <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                    </div>
                </div>
            </div>
            <div class="d-inline-block p-0 m-0">
                <button type="button" class="btn btn-primary mb-1 mr-2" onclick="get_archive_data()"><i
                        class="fa fa-search"></i></button>
                <button type="button" class="btn btn-primary mb-1 " onclick="refreshdata()"><i
                        class="fa fa-refresh"></i></button>
                <button type="button" class="btn btn-primary mb-1 " onclick="addDataset()"><i
                        class="fa fa-plus"></i></button>
                {#                    <button type="button" class="btn btn-secondary mb-1 mr-2" onclick="chart.destroy()">Destroy!!#}
                {#                    </button>#}
            </div>
        </div>
    </div>
    <div class="masonry-sizer col-md-6"></div>
    <div class="masonry-item w-100">
    <div class="row gap-20">
        <!-- #Toatl Visits ==================== -->
        <div class="col-md-2">
            <div class="layers bd p-20" style="background-color: #313131;">
                <div class="layer w-100 mB-10">
                    <h6 class="lh-1" style="color: white;">Consumption</h6>
                </div>
                <div class="layer w-100">
                    <div class="peers ai-sb fxw-nw">
                        <div class="peer peer-greed">
                            <span id="sparklinedash"></span>
                        </div>
                        <div class="peer">
                                    <span id="rno"
                                          class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-green-50 c-green-500">00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- #Total Page Views ==================== -->
        <div class="col-md-2">
            <div class="layers bd p-20" style="background-color: #313131;">
                <div class="layer w-100 mB-10">
                    <h6 class="lh-1">Solar Generation</h6>
                </div>
                <div class="layer w-100">
                    <div class="peers ai-sb fxw-nw">
                        <div class="peer peer-greed">
                            <span id="sparklinedash2"></span>
                        </div>
                        <div class="peer">
                                    <span id="vbat"
                                          class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-red-50 c-red-500">-7%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- #Unique Visitors ==================== -->
        <div class="col-md-2">
            <div class="layers bd p-20" style="background-color: #313131;">
                <div class="layer w-100 mB-10">
                    <h6 class="lh-1">Export to grid</h6>
                </div>
                <div class="layer w-100">
                    <div class="peers ai-sb fxw-nw">
                        <div class="peer peer-greed">
                            <span id="sparklinedash3"></span>
                        </div>
                        <div class="peer">
                                    <span id="vin"
                                          class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-purple-50 c-purple-500">~12%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- #Bounce Rate ==================== -->
        <div class="col-md-2">
            <div class="layers bd p-20" style="background-color: #313131;">
                <div class="layer w-100 mB-10">
                    <h6 class="lh-1">Import From Grid</h6>
                </div>
                <div class="layer w-100">
                    <div class="peers ai-sb fxw-nw">
                        <div class="peer peer-greed">
                            <span id="sparklinedash4"></span>
                        </div>
                        <div class="peer">
                                    <span id="spdk"
                                          class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-blue-50 c-blue-500">33%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="layers bd p-20" style="background-color: #313131;">
                <div class="layer w-100 mB-10">
                    <h6 class="lh-1">Battery</h6>
                </div>
                <div class="layer w-100">
                    <div class="peers ai-sb fxw-nw">
                        <div class="peer peer-greed">
                            <span id="sparklinedash4"></span>
                        </div>
                        <div class="peer">
                            <large><strong>±</strong></large>
                            <span id="spdk"
                                  class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-blue-50 c-blue-500">33</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="col-md-2">
            <div class="layers bd p-20" style="background-color: #313131;">
                <div class="layer w-100 mB-10">
                    <h6 class="lh-1">Import From DG</h6>
                </div>
                <div class="layer w-100">
                    <div class="peers ai-sb fxw-nw">
                        <div class="peer peer-greed">
                            <span id="sparklinedash4"></span>
                        </div>
                        <div class="peer">
                                    <span id="spdk"
                                          class="d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-blue-50 c-blue-500">33%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
        </div>

        <div class="masonry-item col-12">
            <!-- #Site Visits ==================== -->
            <div class="bd" style="background-color: #313131;">
                <div class="peers fxw-nw@lg+ ai-s">
                    <div class="peer peer-greed w-70p@lg+ w-100@lg- p-20">
                        <div class="layers">
                            <div class="layer w-100">
                                <div id="mymapid" style="
                                     height:500px ;
                                     position: sticky;
                                     overflow: hidden;
                                     background-color: transparent;
                                ">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="peer bdL p-20 w-30p@lg+ w-100p@lg-">
                        <!-- #Weather ==================== -->
                        <div class="bd" style="background-color: #313131;">
                            <div class="layers">
                                <!-- Widget Title -->


                                <!-- Today Weather -->
                                <div class="layer w-100">
                                    <div class="peers ai-c jc-sb fxw-nw">
                                        <div class="peer peer-greed">
                                            <div class="layers">
                                                <!-- Temprature -->
                                                <div class="layer w-100">
                                                    <div class="peers fxw-nw ai-c">
                                                        <div class="peer mR-20">
                                                            <h3>32<sup>°F</sup></h3>
                                                        </div>
                                                        <div class="peer">
                                                            <canvas class="sleet" width="44" height="44"></canvas>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Condition -->
                                                <div class="layer w-100">
                                                    <span class="fw-600 c-grey-600">Partly Clouds</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="peer">
                                            <div class="layers ai-fe">
                                                <div class="layer">
                                                    <h5 class="mB-5">Monday</h5>
                                                </div>
                                                <div class="layer">
                                                    <span class="fw-600 c-grey-600">Nov, 01 2017</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Today Weather Extended -->
                                <div class="layer w-100 mY-30">
                                    <div class="layers bdB">
                                        <div class="layer w-100 bdT pY-5">
                                            <div class="peers ai-c jc-sb fxw-nw">
                                                <div class="peer">
                                                    <span>Sunrise</span>
                                                </div>
                                                <div class="peer ta-r">
                                                    <span class="fw-600 c-grey-800">05:00 AM</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layer w-100 bdT pY-5">
                                            <div class="peers ai-c jc-sb fxw-nw">
                                                <div class="peer">
                                                    <span>Sunset</span>
                                                </div>
                                                <div class="peer ta-r">
                                                    <span class="fw-600 c-grey-800">06:00 PM</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layer w-100 bdT pY-5">
                                            <div class="peers ai-c jc-sb fxw-nw">
                                                <div class="peer">
                                                    <span>Irradiance</span>
                                                </div>
                                                <div class="peer ta-r">
                                                    <span class="fw-600 c-grey-800">10 Wb/m<sup>2</sup></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layer w-100 bdT pY-5">
                                            <div class="peers ai-c jc-sb fxw-nw">
                                                <div class="peer">
                                                    <span>Ambient Temperature</span>
                                                </div>
                                                <div class="peer ta-r">
                                                    <span class="fw-600 c-grey-800">10 ℃</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layer w-100 bdT pY-5">
                                            <div class="peers ai-c jc-sb fxw-nw">
                                                <div class="peer">
                                                    <span>Module Temperature</span>
                                                </div>
                                                <div class="peer ta-r">
                                                    <span class="fw-600 c-grey-800">10 ℃</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layer w-100 bdT pY-5">
                                            <div class="peers ai-c jc-sb fxw-nw">
                                                <div class="peer">
                                                    <span>Wind Speed</span>
                                                </div>
                                                <div class="peer ta-r">
                                                    <span class="fw-600 c-grey-800">10km/h</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layer w-100 bdT pY-5">
                                            <div class="peers ai-c jc-sb fxw-nw">
                                                <div class="peer">
                                                    <span>Wind Direction</span>
                                                </div>
                                                <div class="peer ta-r">
                                                    <span class="fw-600 c-grey-800">10°</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="layer w-100 bdT pY-5">
                                            <div class="peers ai-c jc-sb fxw-nw">
                                                <div class="peer">
                                                    <span>Humidity</span>
                                                </div>
                                                <div class="peer ta-r">
                                                    <span class="fw-600 c-grey-800">10%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Week Forecast -->
                                <div class="layer w-100">
                                    <div class="peers peers-greed ai-fs ta-c">
                                        <div class="peer">
                                            <h6 class="mB-10">MON</h6>
                                            <canvas class="sleet" width="30" height="30"></canvas>
                                            <span class="d-b fw-600">32<sup>°F</sup></span>
                                        </div>
                                        <div class="peer">
                                            <h6 class="mB-10">TUE</h6>
                                            <canvas class="clear-day" width="30" height="30"></canvas>
                                            <span class="d-b fw-600">30<sup>°F</sup></span>
                                        </div>
                                        <div class="peer">
                                            <h6 class="mB-10">WED</h6>
                                            <canvas class="partly-cloudy-day" width="30" height="30"></canvas>
                                            <span class="d-b fw-600">28<sup>°F</sup></span>
                                        </div>
                                        <div class="peer">
                                            <h6 class="mB-10">THR</h6>
                                            <canvas class="cloudy" width="30" height="30"></canvas>
                                            <span class="d-b fw-600">32<sup>°F</sup></span>
                                        </div>
                                        <div class="peer">
                                            <h6 class="mB-10">FRI</h6>
                                            <canvas class="snow" width="30" height="30"></canvas>
                                            <span class="d-b fw-600">24<sup>°F</sup></span>
                                        </div>
                                        <div class="peer">
                                            <h6 class="mB-10">SAT</h6>
                                            <canvas class="wind" width="30" height="30"></canvas>
                                            <span class="d-b fw-600">28<sup>°F</sup></span>
                                        </div>
                                        <div class="peer">
                                            <h6 class="mB-10">SUN</h6>
                                            <canvas class="sleet" width="30" height="30"></canvas>
                                            <span class="d-b fw-600">32<sup>°F</sup></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="peer bdL p-20 w-30p@lg+ w-100p@lg-">
                        <div class="layers">
                            <div class="layer w-100">
                                <!-- Progress Bars -->
                                <div class="layers">
                                    <div class="layer w-100 mT-15">
                                        <small class="fw-600 c-grey-700">Battery SOC</small>
                                        <span class="pull-right c-grey-600 fsz-sm">90%</span>
                                        <div class="progress mT-10">
                                            <div class="progress-bar bgc-blue-grey-500" role="progressbar"
                                                 aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"
                                                 style="width:90%;"><span class="sr-only">90% Complete</span></div>
                                        </div>
                                    </div>
                                    <div class="layer w-100 mT-15">
                                        <small class="fw-600 c-grey-700">Consumption Till Date(Mwh)</small>
                                        <span class="pull-right c-grey-600 fsz-sm">50%</span>
                                        <div class="progress mT-10">
                                            <div class="progress-bar bgc-deep-purple-500" role="progressbar"
                                                 aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"
                                                 style="width:50%;"><span class="sr-only">50% Complete</span></div>
                                        </div>
                                    </div>
                                    <div class="layer w-100 mT-15">
                                        <small class="fw-600 c-grey-700">Solar Generation Till Date(Mwh)</small>
                                        <span class="pull-right c-grey-600 fsz-sm">80%</span>
                                        <div class="progress mT-10">
                                            <div class="progress-bar bgc-green-500" role="progressbar"
                                                 aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"
                                                 style="width:80%;"><span class="sr-only">80% Complete</span></div>
                                        </div>
                                    </div>
                                    <div class="layer w-100 mT-15">
                                        <small class="fw-600 c-grey-700">Export To Grid Till Date(Mwh)</small>
                                        <span class="pull-right c-grey-600 fsz-sm">40%</span>
                                        <div class="progress mT-10">
                                            <div class="progress-bar bgc-light-blue-500" role="progressbar"
                                                 aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"
                                                 style="width:40%;"><span class="sr-only">40% Complete</span></div>
                                        </div>
                                    </div>
                                    <div class="layer w-100 mT-15">
                                        <small class="fw-600 c-grey-700">Import From Grid Till Date(Mwh)</small>
                                        <span class="pull-right c-grey-600 fsz-sm">90%</span>
                                        <div class="progress mT-10">
                                            <div class="progress-bar bgc-blue-grey-500" role="progressbar"
                                                 aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"
                                                 style="width:90%;"><span class="sr-only">90% Complete</span></div>
                                        </div>
                                    </div>
                                    <div class="layer w-100 mT-15">
                                        <small class="fw-600 c-grey-700">Import From DG Till Date(Mwh)</small>
                                        <span class="pull-right c-grey-600 fsz-sm">90%</span>
                                        <div class="progress mT-10">
                                            <div class="progress-bar bgc-blue-grey-500" role="progressbar"
                                                 aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"
                                                 style="width:90%;"><span class="sr-only">90% Complete</span></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Pie Charts -->
                                <div class="peers pT-20 mT-20 bdT fxw-nw@lg+ jc-sb ta-c gap-10">
                                    <div class="peer">
                                        <div class="easy-pie-chart" data-size="80" data-percent="75"
                                             data-bar-color="#f44336">
                                            <span></span>
                                        </div>
                                        <small class="fw-600 c-grey-700">Today PR</small>
                                    </div>
                                    <div class="peer">
                                        <div class="easy-pie-chart" data-size="80" data-percent="50"
                                             data-bar-color="#2196f3">
                                            <span></span>
                                        </div>
                                        <small class="fw-600 c-grey-700">Monthly PR</small>
                                    </div>
                                    <div class="peer">
                                        <div class="easy-pie-chart" data-size="80" data-percent="90"
                                             data-bar-color="#ff9800">
                                            <span></span>
                                        </div>
                                        <small class="fw-600 c-grey-700">Till Date PR</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="masonry-item col-md-6">
            <!-- #Monthly Stats ==================== -->
            <div class="bd" style="background-color: #313131;">
                <div class="layers">
                    <div class="layer w-100 pX-20 pT-20">
                        <h6 class="lh-1">Sankey Chart</h6>
                    </div>
                    <div class="layer w-100 p-20">
                        <canvas id="line-chart" height="220"></canvas>
                    </div>
                    <div class="layer bdT p-20 w-100">
                        <div class="peers ai-c jc-c gapX-20">
                            <div class="peer">
                                <span class="fsz-def fw-600 mR-10 c-grey-800">10% <i
                                        class="fa fa-level-up c-green-500"></i></span>
                                <small class="c-grey-500 fw-600">APPL</small>
                            </div>
                            <div class="peer fw-600">
                                <span class="fsz-def fw-600 mR-10 c-grey-800">2% <i
                                        class="fa fa-level-down c-red-500"></i></span>
                                <small class="c-grey-500 fw-600">Average</small>
                            </div>
                            <div class="peer fw-600">
                                <span class="fsz-def fw-600 mR-10 c-grey-800">15% <i
                                        class="fa fa-level-up c-green-500"></i></span>
                                <small class="c-grey-500 fw-600">Sales</small>
                            </div>
                            <div class="peer fw-600">
                                <span class="fsz-def fw-600 mR-10 c-grey-800">8% <i
                                        class="fa fa-level-down c-red-500"></i></span>
                                <small class="c-grey-500 fw-600">Profit</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="masonry-item col-md-6">
            <div class="bd" style="background-color: #313131;">
                <h6 class="c-grey-900">Heatmap</h6>
                    <canvas id="heatmap" height="338" width="560" ></canvas>
            </div>
        </div>
        <div class="masonry-item col-md-6">
            <!-- #Sales Report ==================== -->
            <div class="bd" style="background-color: #313131;">
                <div class="layers">
                    <div class="layer w-100 p-20">
                        <h6 class="lh-1">Sales Report</h6>
                    </div>
                    <div class="layer w-100">
                        <div class="bgc-light-blue-500 c-white p-20">
                            <div class="peers ai-c jc-sb gap-40">
                                <div class="peer peer-greed">
                                    <h5>November 2017</h5>
                                    <p class="mB-0">Sales Report</p>
                                </div>
                                <div class="peer">
                                    <h3 class="text-right">$6,000</h3>
                                </div>
                            </div>
                        </div>
                        <div class="table-responsive p-20">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th class="bdwT-0">Name</th>
                                    <th class="bdwT-0">Status</th>
                                    <th class="bdwT-0">Date</th>
                                    <th class="bdwT-0">Price</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td class="fw-600">Item #1 Name</td>
                                    <td><span
                                            class="badge bgc-red-50 c-red-700 p-10 lh-0 tt-c badge-pill">Unavailable</span>
                                    </td>
                                    <td>Nov 18</td>
                                    <td><span class="text-success">$12</span></td>
                                </tr>
                                <tr>
                                    <td class="fw-600">Item #2 Name</td>
                                    <td><span
                                            class="badge bgc-deep-purple-50 c-deep-purple-700 p-10 lh-0 tt-c badge-pill">New</span>
                                    </td>
                                    <td>Nov 19</td>
                                    <td><span class="text-info">$34</span></td>
                                </tr>
                                <tr>
                                    <td class="fw-600">Item #3 Name</td>
                                    <td><span class="badge bgc-pink-50 c-pink-700 p-10 lh-0 tt-c badge-pill">New</span>
                                    </td>
                                    <td>Nov 20</td>
                                    <td><span class="text-danger">-$45</span></td>
                                </tr>
                                <tr>
                                    <td class="fw-600">Item #4 Name</td>
                                    <td><span
                                            class="badge bgc-green-50 c-green-700 p-10 lh-0 tt-c badge-pill">Unavailable</span>
                                    </td>
                                    <td>Nov 21</td>
                                    <td><span class="text-success">$65</span></td>
                                </tr>
                                <tr>
                                    <td class="fw-600">Item #5 Name</td>
                                    <td><span class="badge bgc-red-50 c-red-700 p-10 lh-0 tt-c badge-pill">Used</span>
                                    </td>
                                    <td>Nov 22</td>
                                    <td><span class="text-success">$78</span></td>
                                </tr>
                                <tr>
                                    <td class="fw-600">Item #6 Name</td>
                                    <td><span
                                            class="badge bgc-orange-50 c-orange-700 p-10 lh-0 tt-c badge-pill">Used</span>
                                    </td>
                                    <td>Nov 23</td>
                                    <td><span class="text-danger">-$88</span></td>
                                </tr>
                                <tr>
                                    <td class="fw-600">Item #7 Name</td>
                                    <td><span
                                            class="badge bgc-yellow-50 c-yellow-700 p-10 lh-0 tt-c badge-pill">Old</span>
                                    </td>
                                    <td>Nov 22</td>
                                    <td><span class="text-success">$56</span></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="ta-c bdT w-100 p-20">
                    <a href="#">Check all the sales</a>
                </div>
            </div>
        </div>

        <div class="masonry-item col-md-6">
            <!-- #Chat ==================== -->
            <div class="bd" style="background-color: #313131;">
                <div class="layers">
                    <div class="layer w-100 p-20">
                        <h6 class="lh-1">Quick Chat</h6>
                    </div>
                    <div class="layer w-100">
                        <!-- Chat Box -->
                        <div class="bgc-grey-200 p-20 gapY-15">
                            <!-- Chat Conversation -->
                            <div class="peers fxw-nw">
                                <div class="peer mR-20">
                                    <img class="w-2r bdrs-50p" src="https://randomuser.me/api/portraits/men/11.jpg"
                                         alt="">
                                </div>
                                <div class="peer peer-greed">
                                    <div class="layers ai-fs gapY-5">
                                        <div class="layer">
                                            <div class="peers fxw-nw ai-c pY-3 pX-10 bgc-white bdrs-2 lh-3/2">
                                                <div class="peer mR-10">
                                                    <small>10:00 AM</small>
                                                </div>
                                                <div class="peer-greed">
                                                    <span>Lorem Ipsum is simply dummy text of</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layer">
                                            <div class="peers fxw-nw ai-c pY-3 pX-10 bgc-white bdrs-2 lh-3/2">
                                                <div class="peer mR-10">
                                                    <small>10:00 AM</small>
                                                </div>
                                                <div class="peer-greed">
                                                    <span>the printing and typesetting industry.</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layer">
                                            <div class="peers fxw-nw ai-c pY-3 pX-10 bgc-white bdrs-2 lh-3/2">
                                                <div class="peer mR-10">
                                                    <small>10:00 AM</small>
                                                </div>
                                                <div class="peer-greed">
                                                    <span>Lorem Ipsum has been the industry's</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Chat Conversation -->
                            <div class="peers fxw-nw ai-fe">
                                <div class="peer ord-1 mL-20">
                                    <img class="w-2r bdrs-50p" src="https://randomuser.me/api/portraits/men/12.jpg"
                                         alt="">
                                </div>
                                <div class="peer peer-greed ord-0">
                                    <div class="layers ai-fe gapY-10">
                                        <div class="layer">
                                            <div class="peers fxw-nw ai-c pY-3 pX-10 bgc-white bdrs-2 lh-3/2">
                                                <div class="peer mL-10 ord-1">
                                                    <small>10:00 AM</small>
                                                </div>
                                                <div class="peer-greed ord-0">
                                                    <span>Heloo</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layer">
                                            <div class="peers fxw-nw ai-c pY-3 pX-10 bgc-white bdrs-2 lh-3/2">
                                                <div class="peer mL-10 ord-1">
                                                    <small>10:00 AM</small>
                                                </div>
                                                <div class="peer-greed ord-0">
                                                    <span>??</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Chat Send -->
                        <div class="p-20 bdT bgc-white">
                            <div class="pos-r">
                                <input type="text" class="form-control bdrs-10em m-0" placeholder="Say something...">
                                <button type="button" class="btn btn-primary bdrs-50p w-2r p-0 h-2r pos-a r-1 t-1">
                                    <i class="fa fa-paper-plane-o"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        var endpoint = '/api/data/live'
        setInterval(function () {
            $.ajax({
                method: "GET",
                url: endpoint,
                success: function (data) {
                    //var jsondata = JSON.parse(data)
                    var Rno = document.getElementById("rno")
                    var Vbat = document.getElementById("vbat");
                    var Vin = document.getElementById("vin");
                    var Spdk = document.getElementById("spdk")
                    latlng(data.data);
                    //let poly = polyline(data.data[i]);
                    //removelayer(marker, poly)
                    for (let i = 0; i < data.data.length; i++) {
                        {#console.log(data.data);#}
                        Vbat.textContent = data.data[i].vbat;
                        Rno.textContent = data.data[i].rno;
                        Vin.textContent = data.data[i].vin;
                        Spdk.textContent = data.data[i].spdk;
                    }
                }
            })
        }, 1000)


        /*
        var polylist = []
        function polyline(data2)
        {
          var latitude = parseFloat(data2.lat)
          var longitude = parseFloat(data2.lng)
          var list = [latitude,longitude]
          polylist.push(list)
          let poly = L.polyline(polylist).addTo(mymap)
          return poly
        }*/
        {#console.log("map")#}
        var mymap = L.map('mymapid').setView([20.5937, 78.9629], 4);
        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox/streets-v11',
            tileSize: 512,
            zoomOffset: -1,
            accessToken: 'pk.eyJ1IjoidmVkYW50MjAiLCJhIjoiY2tmd3N4NGY2MDVmazMwcWYyZHU5bDNycyJ9.0JZoaLVZlvMPVI5V3qPKtw'
        }).addTo(mymap);

        var redIcon = L.icon({
            iconUrl: "/static/assets/static/images/reddot.ico",
            iconSize: [10, 10],
            popupAnchor: [-2, -2],
        });
        var blueIcon = L.icon({
            iconUrl: "/static/assets/static/images/bluedot.ico",
            iconSize: [10, 10],
            popupAnchor: [-2, -2],
        });
        var greenIcon = L.icon({
            iconUrl: "/static/assets/static/images/greendot.ico",
            iconSize: [10, 10],
            popupAnchor: [-2, -2],
        });
        var yellowIcon = L.icon({
            iconUrl: "/static/assets/static/images/yellowdot.ico",
            iconSize: [10, 10],
            popupAnchor: [-2, -2],
        });
        //var marker = L.marker([18.446368,73.816035],{icon:myIcon}).addTo(mymap);
        const colors = [redIcon, blueIcon, yellowIcon, greenIcon]

        function latlng(data) {
            for (let i = 0; i < data.length; i++) {
                let latitude = parseFloat(data[i].lat)
                let longitude = parseFloat(data[i].lng)
                {#console.log([latitude, longitude]);#}
                {#console.log(colors);#}
                let marker = L.marker([latitude, longitude], {icon: colors[i]}).addTo(mymap);
                removelayer(marker);
            }
            //marker.bindPopup(data1.lat+","+data1.lng).openPopup();
            {#return marker#}
        }

        async function removelayer(marker) {
            await sleep(1000)
            mymap.removeLayer(marker)
            // mymap.removeLayer(poly)
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="/static/assets/Chart.HeatMap-0.0.1-alpha/dst/Chart.HeatMap.S.js"></script>
    <script>
        var ctx = document.getElementById('heatmap').getContext('2d');
        var data = {
            labels : ['0h', '1h', '2h', '3h', '4h', '5h', '6h', '7h', '8h', '9h', '10h', '11h','12h','13h', '14h', '15h', '16h', '17h', '18h', '19h', '20h', '21h', '22h', '23h'],
            datasets : [
                {
                    label: 'Mon',
                    data: [0,0,0,0,0,0,0,1732.6,8143.9,16921.8,23218.6,26280.2,28497.7,22716.3,18702.1,13586.9,4480.5,852.5,1.7,0,0,0,0,0]
                },
                {
                    label: 'Tue',
                    data: [0,0,0,0,0,0,0,1732.6,8143.9,16921.8,23218.6,26280.2,28497.7,22716.3,18702.1,13586.9,4480.5,852.5,1.7,0,0,0,0,0]
                },
                {
                    label: ' Wed',
                    data: [0,0,0,0,0,0,0,1732.6,8143.9,16921.8,23218.6,26280.2,28497.7,22716.3,18702.1,13586.9,4480.5,852.5,1.7,0,0,0,0,0]
                },
                {
                    label: 'Thu',
                    data: [0,0,0,0,0,0,0,1732.6,8143.9,16921.8,23218.6,26280.2,28497.7,22716.3,18702.1,13586.9,4480.5,852.5,1.7,0,0,0,0,0]
                },
                {
                    label: 'Fri',
                    data: [0,0,0,0,0,0,0,1732.6,8143.9,16921.8,23218.6,26280.2,28497.7,22716.3,18702.1,13586.9,4480.5,852.5,1.7,0,0,0,0,0]
                },
                {
                    label: 'Sat',
                    data: [0,0,0,0,0,0,0,1732.6,8143.9,16921.8,23218.6,26280.2,28497.7,22716.3,18702.1,13586.9,4480.5,852.5,1.7,0,0,0,0,0]
                },
                {
                    label: 'Sun',
                    data: [0,0,0,0,0,0,0,1732.6,8143.9,16921.8,23218.6,26280.2,28497.7,22716.3,18702.1,13586.9,4480.5,852.5,1.7,0,0,0,0,0]
                }
            ]
        };
        var options = {
            backgroundColor: '#fff',

// Boolean - whether each box in the dataset is outlined
stroke: false,

// Number - width of the outline stroke.
strokePerc: 0.05,

// String - the outline stroke color.
strokeColor: "rgb(128,128,128)",

// String - the outline stroke highlight color.
highlightStrokeColor: "rgb(192,192,192)",

// Boolean - whether to draw the heat map boxes with rounded corners
rounded: false,

// Number - the radius (as a percentage of size) of the rounded corners
roundedRadius: 0.1,

// Number - padding between heat map boxes (as a percentage of box size)
paddingScale: 0,

// String - "gradient", "palette"
colorInterpolation: "gradient",

// Array[String] - the colors used for the active color scheme.
// Any number of colors is allowed.
colors: [ "rgb(255, 255, 255)", "rgb(0, 51, 0)"],

// Boolean - whether boxes change color on hover.
colorHighlight: true,

// Number - a floating point value which specifies how much lighter or
// darker a color becomes when hovered, where 1 is no change,
// 0.9 is slightly darker, and 1.1 is slightly lighter.
colorHighlightMultiplier: 0.92,

// Boolean - Whether to draw labels on the boxes
showLabels: true,

// Number - the font size of the label as percentage of box height
labelScale: 0.2,
// String - label font family
labelFontFamily: '"HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif',

// String - label font style
labelFontStyle: "normal",

// String - label font color
labelFontColor: "rgba(0,0,0,0.5)",
        }
        var newChart = new Chart(ctx).HeatMap(data, options);
    </script>
{% endblock javascripts %}

{% extends "layouts/base.html" %}

{% block title %} Datatable {% endblock title %}

<!-- Specific CSS goes HERE  -->
{% block stylesheets %}
{% endblock stylesheets %}

{% block content %}
    <div class="row">
        <div id='myDiv' style="width: 100%;height: 100vh"><!-- Plotly chart will be drawn inside this DIV --></div>
    </div>
{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
    <script>
        function loc() {
            $.ajax({
                method: "GET",
                url: 'api/data/atdata',
                success: function (data1) {
                    console.log(data1.atdata)
                    var trace1 = {
                        name: data1.atdata[0],
                        x: [data1.atdata[1]],
                        y: [data1.atdata[2]],
                        type: 'scatter',
                        marker: {
                            color: "#E8290B",
                            size: 15,
                            symbol: 'triangle-up'
                        }
                    };
                    var trace2 = {
                        name: data1.atdata[5],
                        x: [data1.atdata[6]],
                        y: [data1.atdata[7]],
                        type: 'scatter',
                        marker: {
                            color: "#E8290B",
                            size: 15,
                            symbol: 'triangle-up'
                        }
                    };
                    var trace3 = {
                        name: data1.atdata[10],
                        x: [data1.atdata[11]],
                        y: [data1.atdata[12]],
                        type: 'scatter',
                        marker: {
                            color: "#E8290B",
                            size: 15,
                            symbol: 'triangle-up'
                        }
                    };
                    var trace4 = {
                        name: data1.atdata[15],
                        x: [data1.atdata[16]],
                        y: [data1.atdata[17]],
                        type: 'scatter',
                        marker: {
                            color: "#E8290B",
                            size: 15,
                            symbol: 'triangle-up'
                        }
                    };
                    var trace5 = {
                        name: "TAG",
                        x: [data1.atdata[20]],
                        y: [data1.atdata[21]],
                        type: 'scatter',
                        marker: {
                            color: "#29B966",
                            size: 15,
                        }
                    };
                    var data = [trace1, trace2, trace3, trace4, trace5];
                    var layout = {
                        xaxis: {
                            showgrid: true,
                            zeroline: true,
                            showline: true,
                            mirror: 'ticks',
                            gridcolor: '#bdbdbd',
                            gridwidth: 2,
                            zerolinecolor: '#969696',
                            zerolinewidth: 4,
                            linecolor: '#636363',
                            linewidth: 6
                        },
                        yaxis: {
                            showgrid: true,
                            zeroline: true,
                            showline: true,
                            mirror: 'ticks',
                            gridcolor: '#bdbdbd',
                            gridwidth: 2,
                            zerolinecolor: '#969696',
                            zerolinewidth: 4,
                            linecolor: '#636363',
                            linewidth: 6
                        }
                    };
                    Plotly.newPlot('myDiv', data, layout);
                },
                error: function (error_data) {
                    console.log("error")
                    console.log(error_data)
                }
            })
        }

        setInterval(loc, 100)
    </script>
{% endblock javascripts %}
